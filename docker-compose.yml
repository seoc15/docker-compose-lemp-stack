version: '3.8'

services:
  # Servidor Web Nginx
  nginx:
    image: nginx:latest
    container_name: asir_nginx
    ports:
      - "8080:80"
    volumes:
      - ./html:/usr/share/nginx/html
    networks:
      - asir_net
    depends_on:
      - mariadb

  # Base de Datos MariaDB
  mariadb:
    image: mariadb:10.6
    container_name: asir_mariadb
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: asir_db
      MYSQL_USER: asir_user
      MYSQL_PASSWORD: asir_password
    volumes:
      - db_data:/var/lib/mysql
    networks:
      - asir_net

  # Agente Wazuh (Seguridad)
  # Nota: Se iniciar치 pero dar치 error de conexi칩n hasta que configuremos
  # un servidor Wazuh real. Para la pr치ctica, demuestra que sabes integrarlo.
  wazuh-agent:
    image: wazuh/wazuh-agent:latest
    container_name: asir_wazuh_agent
    environment:
      - WAZUH_MANAGER=127.0.0.1 
    networks:
      - asir_net

networks:
  asir_net:

volumes:
  db_data: